<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="游魂的网络日志">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="//www.shen.ee">
    <!--SEO-->

    <meta name="keywords" content="React路由,react-router-dom" />


    <meta name="description" content="React路由-基本使用
这里使用最广泛的 v5 版本，v5 文档、 v5 中文文档
注意：v6 版本相比 v5 版本有破坏性更新！ v6 文档

步骤：

安装：yarn add react-..." />



<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />

    <!--Title-->


<title>React路由 | 游魂的网络日志</title>


    <link rel="alternate" href="/atom.xml" title="游魂的网络日志" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
      var cnzz_s_tag = document.createElement('script');
      cnzz_s_tag.type = 'text/javascript';
      cnzz_s_tag.async = true;
      cnzz_s_tag.charset = 'utf-8';
      cnzz_s_tag.src = cnzz_protocol + 'w.cnzz.com/c.php?id=1272902812&async=1';
      var root_s = document.getElementsByTagName('script')[0];
      root_s.parentNode.insertBefore(cnzz_s_tag, root_s);
		</script>
	</div>






    

    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(/./img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Andy'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">游魂的网络日志</h2>-->
            
                 <img src="/img/branding.png" alt="游魂的网络日志" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="//www.shen.ee">游魂的网络日志</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/前端/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/后端/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/工具/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/资源/"><i class="fa "></i>资源</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about/"><i class="fa "></i>关于我</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="React路由">
            
	            React路由
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/前端/">前端</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/React路由/">React路由</a> <a class="tag-link" href="/tags/react-router-dom/">react-router-dom</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2022/06/15</span>
        </span>
        
    
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>393</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <h2 id="React路由-基本使用"><a href="#React路由-基本使用" class="headerlink" title="React路由-基本使用"></a>React路由-基本使用</h2><blockquote>
<p>这里使用最广泛的 v5 版本，<a href="https://v5.reactrouter.com/" target="_blank" rel="noopener">v5 文档</a>、 <a href="https://react-router.docschina.org/web/guides/philosophy" target="_blank" rel="noopener">v5 中文文档</a></p>
<p>注意：v6 版本相比 v5 版本有破坏性更新！ <a href="https://reactrouter.com/" target="_blank" rel="noopener">v6 文档</a></p>
</blockquote>
<p><strong>步骤</strong>：</p>
<ol>
<li>安装：<code>yarn add react-router-dom@5.3.0</code></li>
<li>导入路由的三个核心组件：Router / Route / Link</li>
<li>使用 Router 组件包裹整个应用</li>
<li>使用 Link 组件作为导航菜单（路由入口）</li>
<li>使用 Route 组件配置路由规则和要展示的组件（路由出口）</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Route, Link &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> First = <span class="function"><span class="params">()</span> =&gt;</span> &lt;p&gt;页面一的页面内容&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const App = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;Router&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className="App"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">          &lt;li&gt;</span></span><br><span class="line"><span class="regexp">            &#123;/</span>*</span><br><span class="line">              to属性：浏览器地址栏中的pathname（location.pathname）</span><br><span class="line">            *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">            &lt;Link to="/</span>first<span class="string">"&gt;页面一&lt;/Link&gt;</span></span><br><span class="line"><span class="string">          &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        &#123;/*</span></span><br><span class="line"><span class="string">          path属性：路由规则</span></span><br><span class="line"><span class="string">          component属性：展示的组件</span></span><br><span class="line"><span class="string">          Route 组件写在哪，渲染出来的组件就展示在哪</span></span><br><span class="line"><span class="string">        */&#125;</span></span><br><span class="line"><span class="string">        &lt;Route path="</span>/first<span class="string">" component=&#123;First&#125;&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/Router&gt;</span></span><br><span class="line"><span class="string"> 	)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="React路由-Router模式"><a href="#React路由-Router模式" class="headerlink" title="React路由-Router模式"></a>React路由-Router模式</h2><ul>
<li><p>Router 组件：包裹整个应用，一个 React 应用只需要使用一次</p>
</li>
<li><p>两种常用 Router：<code>HashRouter</code> 和 <code>BrowserRouter</code></p>
</li>
<li><p>HashRouter：使用 URL 的哈希值实现（</p>
<p><a href="http://localhost:3000/#/first）" target="_blank" rel="noopener">http://localhost:3000/#/first）</a></p>
<ul>
<li>原理：监听 window 的 <code>hashchange</code> 事件来实现的</li>
</ul>
</li>
<li><p>（推荐）</p>
<p>BrowserRouter</p>
<p>：使用 H5 的 history.pushState() API 实现（</p>
<p><a href="http://localhost:3000/first）" target="_blank" rel="noopener">http://localhost:3000/first）</a></p>
<ul>
<li>原理：监听 window 的 <code>popstate</code> 事件来实现的</li>
</ul>
</li>
</ul>
<h2 id="React路由-Link-amp-NavLink组件"><a href="#React路由-Link-amp-NavLink组件" class="headerlink" title="React路由-Link&amp;NavLink组件"></a>React路由-Link&amp;NavLink组件</h2><p><code>Link</code> 组件：用于指定导航链接，会渲染成 a 标签</p>
<ul>
<li><code>to</code> 属性，将来会渲染成 a 标签的 href 属性</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=<span class="string">"/first"</span>&gt;页面一&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 渲染为：</span></span><br><span class="line"><span class="regexp">&lt;a href="/</span>first<span class="string">"&gt;页面一&lt;/a&gt;</span></span><br></pre></td></tr></table></figure>
<p>除了 Link 组件外，路由库中还提供了 <code>NavLink</code> 组件，可以在路由匹配时获得一个高亮类名，从而指定高亮效果（样式需要自己手动指定）</p>
<ul>
<li><p>使用方式同 Link 组件，只是额外获得一个高亮类名</p>
</li>
<li><p><code>activeClassName</code> 属性：用于指定高亮的类名，默认 <code>active</code></p>
</li>
<li><p><code>exact</code>属性：精确匹配，表示必须精确匹配（to 属性值和浏览器地址栏中的 pathname 相同），类名才生效</p>
<ul>
<li>默认情况下，React 路由中的 NavLink 的 to 属性在匹配的时候，默认是 <strong>模糊匹配</strong></li>
<li><strong>模糊匹配</strong>，表示：只要 浏览器地址栏中的 patchname（比如：/search/a）是以 NavLink to（/search） 属性的值开头的，此时，就会匹配成功</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink to=<span class="string">"/first"</span>&gt;页面一&lt;<span class="regexp">/NavLink&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 渲染为：</span></span><br><span class="line"><span class="regexp">&lt;a href="/</span>first<span class="string">" class="</span>active<span class="string">"&gt;页面一&lt;/a&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// ---</span></span><br><span class="line"><span class="string">// Link 的模糊匹配和精确匹配</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 模糊匹配：</span></span><br><span class="line"><span class="string">// 浏览器地址栏中的 pathname 为：/search/a</span></span><br><span class="line"><span class="string">// 匹配成功的 to 属性为：</span></span><br><span class="line"><span class="string">// 1 /search 		==&gt; 模糊匹配成功</span></span><br><span class="line"><span class="string">// 2 /search/a	==&gt; 完全相同，匹配成功</span></span><br><span class="line"><span class="string">// 3 /sear			==&gt; 匹配失败，因为 /search 是一块完整的内容，必须要出现这一整块内容才可以</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 精确匹配：</span></span><br><span class="line"><span class="string">// 浏览器地址栏中的 pathname 为：/search/a</span></span><br><span class="line"><span class="string">// 注意：添加 exact 属性后，变为精确匹配，此时，这个 NavLink 只能匹配 /search 这一个 patchname 了</span></span><br><span class="line"><span class="string">// React 中如果属性是 布尔值 可以只写属性名称，不用写后面的 = 等内容</span></span><br><span class="line"><span class="string">&lt;NavLink exact to="</span>/search<span class="string">"&gt;search 页面&lt;/NavLink&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 等价于：</span></span><br><span class="line"><span class="string">&lt;NavLink exact=&#123;true&#125; to="</span>/search<span class="string">"&gt;search 页面&lt;/NavLink&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="React路由-Route组件"><a href="#React路由-Route组件" class="headerlink" title="React路由-Route组件"></a>React路由-Route组件</h2><p><code>Route</code> 组件：用来配置路由规则</p>
<ul>
<li><code>path</code> 属性，指定路由规则</li>
<li><code>component</code> 属性，指定要渲染的组件</li>
<li><code>children</code> 子节点，指定要渲染的组件</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用法一：使用 component 属性指定要渲染的组件</span></span><br><span class="line">&lt;Route path=<span class="string">"/search"</span> component=&#123;Search&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用法二：使用 children 指定要渲染的组件</span></span><br><span class="line">&lt;Route path=<span class="string">"/search"</span>&gt;</span><br><span class="line">	&lt;Search /&gt;</span><br><span class="line">&lt;<span class="regexp">/Route&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：对于 Route 来说，如果路由规则匹配成功，那么，就会渲染对应组件；否则，渲染 null 或者说不渲染任何内容</p>
<p>对于 Route 组件来说，<code>path</code> 属性是可选的：</p>
<ul>
<li>如果 Route 组件没有 path 属性，表示：该路由永远匹配成功，一定会渲染该组件</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route&gt;</span><br><span class="line">	&lt;SomeComponent /&gt;</span><br><span class="line">&lt;<span class="regexp">/Route&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="React路由-路由匹配模式"><a href="#React路由-路由匹配模式" class="headerlink" title="React路由-路由匹配模式"></a>React路由-路由匹配模式</h2><p>路由有两种匹配模式：1 模糊匹配（默认）, 2 精确匹配</p>
<p><strong>模糊匹配</strong></p>
<ul>
<li>问题：当 Link组件的 to 属性值为 “/login”时，为什么 默认路由 也被匹配成功?</li>
<li>默认情况下，React 路由是<strong>模糊匹配</strong>模式</li>
<li>模糊匹配规则：只要 pathname（浏览器地址栏中的地址） 以 path 开头就会匹配成功</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=<span class="string">"/login"</span>&gt;登录页面&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">&lt;Route path="/</span><span class="string">" component=&#123;Home&#125; /&gt; 匹配成功</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// pathname 代表Link组件的to属性（也就是 location.pathname）</span></span><br><span class="line"><span class="string">// path 代表Route组件的path属性</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>path</th>
<th>能够匹配的pathname（浏览器地址栏）</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>所有 pathname</td>
</tr>
<tr>
<td>/first</td>
<td>/first 或 /first/a 或 /first/a/b/…</td>
</tr>
</tbody>
</table>
<p><strong>精确匹配</strong></p>
<ul>
<li>问题：默认路由任何情况下都会展示，如何避免这种问题?</li>
<li>给 Route 组件添加 <code>exact</code> 属性，让其变为<strong>精确匹配</strong>模式</li>
<li>精确匹配：只有当 path 和 pathname 完全匹配时才会展示该路由</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此时，该组件只能匹配 pathname=“/” 这一种情况 </span></span><br><span class="line">&lt;Route exact path=<span class="string">"/"</span> component=... /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="React路由-执行过程"><a href="#React路由-执行过程" class="headerlink" title="React路由-执行过程"></a>React路由-执行过程</h2><p>切换页面时，执行过程如下：</p>
<ol>
<li>点击 Link 组件（a标签），修改了浏览器地址栏中的 url</li>
<li>React 路由监听到地址栏 url 的变化 hashchange popstate</li>
<li>React 路由内部遍历所有 Route 组件，使用路由规则（path）与 pathname（hash）进行匹配</li>
<li>当路由规则（path）能够匹配地址栏中的 pathname（hash） 时，就展示该 Route 组件的内容</li>
</ol>
<p>注意：默认情况下，<strong>React 路由可以同时匹配成功多个</strong>，只要匹配成功，该路由组件对应的内容就会渲染到页面中</p>
<h2 id="React路由-Switch组件-amp-404页面"><a href="#React路由-Switch组件-amp-404页面" class="headerlink" title="React路由-Switch组件&amp;404页面"></a>React路由-Switch组件&amp;404页面</h2><p><code>Switch</code> 组件：包裹 Route 组件，<strong>只会渲染第一个匹配的组件</strong>，即使有多个路由都可以匹配成功</p>
<ul>
<li>在实际开发时，通常会用 <code>Switch</code> 组件包裹 <code>Route</code> 组件</li>
<li>通过 <code>Switch</code> 组件非常容易的就能实现 404 页面功能：</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Route exact path=<span class="string">"/"</span>&gt;</span><br><span class="line">  	&lt;Home /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Route&gt;</span></span><br><span class="line"><span class="regexp">  &lt;Route path="/</span>about<span class="string">"&gt;</span></span><br><span class="line"><span class="string">  	&lt;About /&gt;</span></span><br><span class="line"><span class="string">  &lt;/Route&gt;</span></span><br><span class="line"><span class="string">  &lt;Route path="</span>/user<span class="string">"&gt;</span></span><br><span class="line"><span class="string">  	&lt;User /&gt;</span></span><br><span class="line"><span class="string">  &lt;/Route&gt;</span></span><br><span class="line"><span class="string">  // 即使这个也可以匹配成功 /user/a 但是因为 Switch 组件的存在，这个路由对应的组件内容是不会渲染的</span></span><br><span class="line"><span class="string">  &lt;Route path="</span>/user/a<span class="string">"&gt;</span></span><br><span class="line"><span class="string">  	&lt;User1 /&gt;</span></span><br><span class="line"><span class="string">  &lt;/Route&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	&#123;/* 以上路由规则全都不匹配时，展示 404 页面 */&#125;</span></span><br><span class="line"><span class="string">  &#123;/* 注意：这个路由需要放在最后，兜底 */&#125;</span></span><br><span class="line"><span class="string">  &lt;Route&gt;</span></span><br><span class="line"><span class="string">  	&lt;NoMatch /&gt;</span></span><br><span class="line"><span class="string">  &lt;/Route&gt;</span></span><br><span class="line"><span class="string">&lt;/Switch&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="React路由-编程式导航"><a href="#React路由-编程式导航" class="headerlink" title="React路由-编程式导航"></a>React路由-编程式导航</h2><ul>
<li><p>场景：点击登录按钮，登录成功后，通过代码跳转到后台首页，如何实现？</p>
</li>
<li><p>编程式导航：通过 JS 代码来实现页面跳转</p>
</li>
<li><p>可以通过<code>useHistory</code>hook 来拿到路由提供的 history 对象，用于获取浏览器历史记录的相关信息。常用操作：</p>
<ul>
<li><code>push(path)</code>：跳转到某个页面，参数 path 表示要跳转的路径</li>
<li><code>replace(patch)</code>：跳转到某个页面，会替换当前的历史记录</li>
<li><code>go(n)</code>： 前进或后退到某个页面，参数 n 表示前进或后退页面数量（比如：-1 表示后退到上一页）</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useHistory &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Login = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> history = useHistory()</span><br><span class="line">  </span><br><span class="line">	<span class="keyword">const</span> onLogin = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    history.push(<span class="string">'/home'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">  	&lt;button onClick=&#123;onLogin&#125;&gt;登录&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong><code>push(path)</code>和 <code>replace(path)</code> 跳转路由的区别</strong>：</p>
<p>浏览器会自动记录访问过来的页面路径，可以简单的把理解为通过一个 数组 来记录的。</p>
<p>比如：我们访问了 3 个页面：[‘/login’, ‘/home’, ‘/search’]，当前所在页面为：’/search’</p>
<ol>
<li>此时，如果我们又通过 <code>push(&#39;/a&#39;)</code> 方法访问了一个新页面：’/a’，此时，就相当于往数组中 push 了一条数据，<ul>
<li>那么，访问该页面后，浏览器中的记录为：[‘/login’, ‘/home’, ‘/search’, ‘/a’]</li>
</ul>
</li>
<li>此时，如果我们又通过 <code>replace(&#39;/a&#39;)</code> 方法访问了一个新页面：’/a’，此时，就相当于把当前页面地址，替换为 ‘/a’<ul>
<li>那么，访问该页面后，浏览器中的记录为：[‘/login’, ‘/home’, ‘/a’]</li>
</ul>
</li>
</ol>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">游魂的网络日志</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/article/16686.html" class="pre-post btn btn-default" title='React系列学习教程合集'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">React系列学习教程合集</span>
        </a>
    
    
        <a href="/article/57549.html" class="next-post btn btn-default" title='react-redux学习'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">react-redux学习</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	<link rel="stylesheet" href="https://cdn.bootcss.com/gitalk/1.4.1/gitalk.min.css">
<script src="//cdn.bootcss.com/gitalk/1.4.1/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.9.0/js/md5.min.js"></script>

<div id="gitalk-container"></div>
<script type="text/javascript">
    var pathArr = location.pathname.split("/");
    var pathId = pathArr[pathArr.length-1];
    var gitalk = new Gitalk({
        // Gitalk配置
        language: "zh-CN",
        clientID: "7f009ecacf6f9ef23c4f",
        clientSecret: "37f121ac84806a529cfb6f410e86b869384ecc56",
        repo: "youhunwl.github.io",
        owner: "youhunwl",
        admin: ["youhunwl"],
        id: md5(location.pathname),
        distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
</script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-基本使用"><span class="toc-text">React路由-基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-Router模式"><span class="toc-text">React路由-Router模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-Link-amp-NavLink组件"><span class="toc-text">React路由-Link&amp;NavLink组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-Route组件"><span class="toc-text">React路由-Route组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-路由匹配模式"><span class="toc-text">React路由-路由匹配模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-执行过程"><span class="toc-text">React路由-执行过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-Switch组件-amp-404页面"><span class="toc-text">React路由-Switch组件&amp;404页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React路由-编程式导航"><span class="toc-text">React路由-编程式导航</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2017 - 2022
                </span> |
                <span>
            		<a href="//www.shen.ee" class="copyright-links" target="_blank">游魂的网络日志</a>
        	</span>
            </div>
        </div>
    </div>
</div>




    <script src="/assets/tagcanvas.min.js?rev=2.9"></script>
    <script>
        var tagOption = {
            textColour: '#444', // 字体颜色
            outlineMethod: 'block', // 选中模式
            outlineColour: '#FFDAB9', // 选中模式的颜色
            interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
            textHeight: 13,
            outlineRadius: 3,
            freezeActive: true || '', // 选中的标签是否继续滚动
            frontSelect: true || '', // 不选标签云后部的标签
            initial: [0.1, -0.1],
            depth: 0.5,
            decel: 0.95,
            maxSpeed: 0.03,
            reverse: true || '', // 是否反向触发
            fadeIn: 500, // 进入动画时间
            wheelZoom: false || '' // 是否启用鼠标滚轮
        }
        TagCanvas.Start('tag-cloud-3d','',tagOption);
    </script>




<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>